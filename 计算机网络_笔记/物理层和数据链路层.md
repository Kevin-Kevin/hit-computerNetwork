## 物理层

### 信道复用技术

一条路给多个人使用

1. 频分复用

2. 时分复用

3. 统计时分复用

4. 波分复用
5. 码分复用(光的频分复用)

## 数据链路层

> 1. 以太网帧格式
>
> 2. MTU
>
> 3. ARP 协议, 报文格式, 查询原理, 缓存
>
>    



### 链路, 数据链路, 帧

> Page 71

### 三个基本问题

- 封装成帧

  ip 数据报加上首部和尾部, 构成一个帧

  其实是加上了一个边界, 告诉你我这一帧的开始和结尾

  首尾部还有一些控制信息, 比如帧的数据部分长度上限---最大传输单元 MTU

- 透明传输
  解决帧的数据部分如果出现了和尾部一样的部分会被错认为是一个帧的问题

- 差错检测

  使用 循环冗余检验 CRC  ( Cyclic Redundancy Check ) 

  解决了比特在传输过程中有可能会从 0-1或者 1-0



#### 局域网 ( 也可以说是以太网 ) 

多台主机的网络适配器( 网卡 )通过交换机连接成局域网

#### 以太网帧

![Screen Shot 2021-03-11 at 16.34.17](https://gitee.com/kevinzhang1999/my-picture/raw/master/uPic/Screen%20Shot%202021-03-11%20at%2016.34.17-1615451673570.png)

1. 以太网帧 **数据** 字段为 46-1500 字节, **IP 数据报小于 46 字节会被填充**
2. 目的地址和源地址字段都是其 Mac 地址
3. 类型字段代表后面数据使用的协议, 如 IP 协议, ARP ...
4. 以太网帧没有尾部, 因为曼彻斯特编码, 只要在结束后不发送, 就代表帧结束
5. 图中 FCS 为帧检验序列, 使用 CRC 进行差错检测



### 网络适配器 ( 网卡 )

也有 cpu, ram, rom

具有过滤功能可以识别帧目的 Mac 地址是否是本机 Mac 地址

### Mac 地址

每个网络适配器都有一个唯一的 Mac 地址

在以太网 Mac 帧的首部包含目的 Mac 地址和源 Mac 地址

Mac 地址存储在其网卡的 rom 中

### 地址解析协议 ARP ( Address Resolution Protocol)

根据 IP 地址解析出 Mac 地址

每台主机或者路由器内存中都有一个 ARP 表 ( ARP cache )

该表存储了局域网内各主机的和路由器的 IP 地址和 Mac 地址

当主机要向局域网内主机发送 IP 数据报时, 先看 ARP cache 中有没有

> 如果没有
>
> ARP 进程会在本局域网上广播发送一个 ARP 请求分组	
>
> 分组中包含本机 IP 地址, Mac 地址以及要访问的 IP 地址
>
> 所有主机都会接收到, 但是只有要访问的 IP 地址的主机会响应一个单播



### 交换机

交换机中有一个交换机表

 其中包含了 Mac 地址, 对应的端口号, 以及老化期时间

每次收到一个以太网帧, 交换机会解析以太网帧, 获取 Mac 地址

然后将此 Mac 地址和接收此帧的端口号放入表中 



### ppp, 广播信道, 碰撞检测用不到, 就不写了

